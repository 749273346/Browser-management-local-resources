# 插件全屏体验升级与多标签页架构计划 (修订版)

根据您的最新指示，我们将对插件进行重大重构，实现全流程的**多标签页（Multi-Tab）全屏体验**，包括首次设置（登录）页面。

## 1. 核心交互逻辑重构

### 1.1 启动与初始化 (Login/Setup)
*   **点击插件图标**：
    *   **场景 A (首次使用/未设置)**：直接**新建一个标签页**，全屏展示“欢迎/设置界面”（您提到的登录界面）。
    *   **场景 B (已设置)**：直接**新建一个标签页**，全屏展示“一级菜单”（根目录）。
*   **设置完成动作**：用户在欢迎页输入路径并确认后，页面会自动刷新或跳转，直接呈现一级菜单，并记录状态。

### 1.2 层级导航逻辑 (Tab-based Navigation)
*   **一级菜单（Level 1）**：在全屏标签页中展示。点击任意文件夹时，**不再在当前页跳转**，而是**新建一个标签页**打开二级菜单。
*   **二级菜单（Level 2）**：在新的全屏标签页中展示。界面风格与一级保持一致，但内容为二级目录。
*   **三级菜单（Level 3）**：点击项目时，保持现有逻辑，直接调用 Windows 资源管理器打开。

### 1.3 状态传递机制
利用 **URL 参数** 在不同标签页间传递路径信息：
*   一级页面 URL: `chrome-extension://.../index.html` (无参数，默认加载 Root)
*   二级页面 URL: `chrome-extension://.../index.html?path=E%3A%2FQC...%2F安全管理`

## 2. UI/UX 全屏适配与美化

### 2.1 视觉风格 (Material Design)
*   **统一性**：欢迎页、一级、二级页面均采用统一的 Material Design 3 风格（Google Blue 配色、大圆角、阴影）。
*   **全屏适配**：
    *   移除 `body` 的固定宽高限制，改为 `100vw/100vh` 自适应。
    *   **FileGrid (网格)**: 升级为响应式布局 (`grid-cols-3 sm:grid-cols-4 md:grid-cols-6 xl:grid-cols-8`)，充分利用宽屏。
    *   **FileList (列表)**: 优化行高和内边距，避免全屏下显得空旷。

### 2.2 欢迎页 (Login) 优化
*   设计一个精美的全屏引导页，居中展示 Logo 和输入框，背景可使用柔和的渐变色，营造高端感。

## 3. 实现步骤

### 第一步：Manifest 与后台脚本配置
*   修改 `manifest.json`：移除 `default_popup`。
*   创建 `background.js`：监听 `chrome.action.onClicked`，执行 `chrome.tabs.create({ url: 'index.html' })`。
*   修改 `vite.config.js`：确保 `background.js` 被正确打包。

### 第二步：全屏样式适配
*   修改 `index.css`：移除 `width: 400px; height: 600px` 限制，改为全屏自适应。
*   修改 `FileGrid.jsx`：添加 Tailwind 响应式断点类名。

### 第三步：路由与状态逻辑重构 (App.jsx)
*   **初始化判断**：
    *   优先读取 URL `path` 参数。
    *   如果没有 URL 参数，读取 `localStorage` 的 `rootPath`。
    *   如果都没有，显示 `WelcomeScreen`。
*   **导航重写**：
    *   `handleNavigate`: 检测到是文件夹且非三级时，使用 `chrome.tabs.create` 打开带参数的新 URL。

### 第四步：构建与验证
*   重新构建插件。
*   验证首次打开 -> 设置 -> 一级 -> 二级 -> 三级 的全流程。
