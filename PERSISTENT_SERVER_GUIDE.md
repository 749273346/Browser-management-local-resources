# Local Resource Manager - 持久化服务器解决方案

## 🎯 问题描述
扩展需要持续运行的 Node.js 服务器 (localhost:3001)，但当前需要手动启动且关闭终端后服务停止。

## 📊 解决方案对比

### 方案一：后台进程化 ✅ 已创建
**文件**: `start-background.bat` + `start-server-hidden.vbs`
- **优点**: 简单，无需额外安装，无窗口运行
- **缺点**: 无自动重启，无监控界面
- **适用**: 临时使用，追求极简
- **使用方法**: 双击 `start-background.bat`

### 方案二：Windows计划任务 ✅ 已创建  
**文件**: `create-auto-start.bat`
- **优点**: 系统级自动启动，开机自启，无需用户干预
- **缺点**: 需要管理员权限，无界面控制
- **适用**: 长期使用，追求"装完即用"
- **使用方法**: 右键管理员运行 `create-auto-start.bat`

### 方案三：进程守护程序 ✅ 已创建
**文件**: `server-daemon.js` + `start-daemon.bat`
- **优点**: 自动重启崩溃的服务器，有日志输出，可控性强
- **缺点**: 需要保持命令行窗口（可选后台化）
- **适用**: 开发环境，需要稳定性
- **使用方法**: 双击 `start-daemon.bat`

### 方案四：系统托盘应用 ✅ 已创建
**文件**: `tray-app.js` + Electron依赖
- **优点**: 图形化界面，双击测试，完全可控，用户体验最佳
- **缺点**: 需要安装Electron，占用资源稍多
- **适用**: 生产环境，追求用户体验
- **使用方法**: 
  ```bash
  npm install electron
  npm start
  ```

## 🚀 推荐选择

### 🥇 最佳选择：方案二 + 方案一组合
1. 先运行 `create-auto-start.bat`（管理员权限）设置自动启动
2. 日常使用 `start-background.bat` 手动控制

### 🥈 开发者选择：方案三
适合需要监控服务器状态的场景

### 🥉 高级用户选择：方案四
适合追求完整桌面应用体验的用户

## 🔧 快速开始

### 立即解决（推荐）:
1. 双击 `start-background.bat` - 服务器将在后台运行
2. 扩展现在应该可以正常工作了
3. 可以关闭所有窗口，服务器会继续在后台运行

### 永久解决（推荐）:
1. 右键以管理员身份运行 `create-auto-start.bat`
2. 重启电脑，服务器将自动启动
3. 以后无需任何操作，扩展随时可用

## 📍 验证服务器状态
打开浏览器访问: http://localhost:3001/api/files?path=C:\
如果返回JSON数据，说明服务器运行正常。

## 🛠️ 故障排除
- **端口被占用**: 修改 `server/index.js` 中的 PORT 变量
- **权限问题**: 确保以管理员身份运行自动启动设置
- **Node.js未安装**: 先安装 Node.js (https://nodejs.org/)

## 💡 小贴士
- 方案一和方案二可以同时使用，互不冲突
- 任务管理器中可以看到 `node.exe` 进程即为服务器
- 需要停止服务器时，在任务管理器结束 `node.exe` 进程即可